<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Visualisasi data Diagram Peta dan GeoJson">
    <meta name="author" content="Andre Rio">
    <meta name="generator" content="Hugo 0.72.0">
    <title>Implementasi Diagram Peta</title>

    <link rel="canonical" href="https://v5.getbootstrap.com/docs/5.0/examples/album/">



    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
        integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">

    <link rel="stylesheet" href="leaflet.css" />
    <script src="leaflet.js"></script>
    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>


</head>

<body>

    <header>
        <div class="collapse bg-dark" id="navbarHeader">
            <div class="container">
                <div class="row">
                    <div class="col-sm-8 col-md-7 py-4">
                        <h4 class="text-white">About</h4>
                        <p class="text-muted">Seluruh tampilan baik screenshot atau link konten terkait aplikasi
                            sederhana ini merupakan hasil pengembangan mandiri serta sarana pembelajaran saya. Beberapa
                            fitur mungkin belum pernah dipublikasikan secara online. Untuk informasi lebih lanjut atau
                            permintaan khusus, silakan hubungi</p><a href="andreriotech.my.id">andreriotech.my.id</a>
                    </div>
                    <div class="col-sm-4 offset-md-1 py-4">
                        <h4 class="text-white">Navigation</h4>
                        <ul class="list-unstyled">
                            >
                            <li><a href="index.html" class="text-white">Basic</a></li>
                            <a href="chloropethJSONData.html" class="text-white">Chloropeth From JSON</a>
                            <li><a href="chloropeth.html" class="text-white">Chloropeth</a></li>
                            <li><a href="chloropethMultiData.html" class="text-white">Chloropeth 2</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="navbar navbar-dark bg-dark shadow-sm">
            <div class="container">
                <a href="#" class="navbar-brand d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
                        stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="mr-2"
                        viewBox="0 0 24 24">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" />
                        <circle cx="12" cy="13" r="4" />
                    </svg>
                    <strong>andreriotech</strong>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader"
                    aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </div>
    </header>

    <main>

        <section class="py-5 text-center container">
            <div class="row py-lg-5">
                <div class="col-lg-6 col-md-8 mx-auto">
                    <h1 class="font-weight-light">Implementasi Visualisasi data Map Chart</h1>
                    <p class="lead text-muted">Merupakan proses penerapan grafik peta interaktif ke dalam halaman web
                        menggunakan bahasa pemrograman HTML. Visualisasi ini memungkinkan data geografis disajikan
                        secara visual dan interaktif, sehingga memudahkan pengguna untuk memahami distribusi data, pola,
                        dan tren di berbagai wilayah.</p>
                    <p>
                        <a href="#" class="btn btn-primary my-2">Main call to action</a>
                        <a href="#" class="btn btn-secondary my-2">Secondary action</a>
                    </p>
                </div>
            </div>
        </section>

        <div class="album py-5 bg-light">
            <div class="container">

                <div class="row ">
                    <h1>Ini Koordinatnya aku harus gambar manual trus disimpan :</h1>
                    <div class="col">
                        <div id="map" style="width: 100%; height: 100%;"></div>
                        <div class="card shadow-sm">

                            <div class="card-body">
                                <p class="card-text">Memanfaatkan library Leaflet.js dan data GeoJSON untuk
                                    merepresentasikan batas wilayah secara visual. Visualisasi ini memungkinkan analisis
                                    spasial yang lebih mendalam terhadap [obyek yang dianalisis].</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                                    </div>
                                    <small class="text-muted">9 mins</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <canvas id="myChart"></canvas>
                        <div class="card shadow-sm">

                            <div class="card-body">
                                <div id="map" style="width: 100%; height: 600%;"></div>
                                <p class="card-text">Warna dan Style pada stack serta jenis chart dapat diatur sesuai
                                    kebutuhan</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                                    </div>
                                    <small class="text-muted">9 mins</small>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <footer class="text-muted py-5">
        <div class="container">
            <p class="float-right mb-1">
                <a href="#">Back to top</a>
            </p>
            <p class="mb-1">Sample &copy; Andreriotech</p>
            <p class="mb-0">Belajar bersama <a href="https://andreriotech.my.id">Website</a> <a
                    href="https://api.whatsapp.com/send?phone=+6281649113708&text=Mohon informasi lebih lanjut"
                    target="_blank">whatsApp</a>.</p>
        </div>
    </footer>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
        integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script>
        // Inisialisasi peta
        var map = L.map('map').setView([-0.490812, 117.126616], 13);

        // Tambahkan tile layer dari OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://andreriotech.my.id">OpenStreetMap</a> tes aja wal'
        }).addTo(map);

        // Memuat data dari data.json
        fetch('data.json')
            .then(response => response.json())
            .then(populationData => {

                // Memuat file GeoJSON dan menggabungkan dengan data suara
                fetch('kunjang.geojson')
                    .then(response => response.json())
                    .then(geojsonData => {
                        L.geoJson(geojsonData, {
                            onEachFeature: function (feature, layer) {
                                var kelurahanName = feature.properties.NAMOBJ;
                                var population = populationData.find(item => item.Kelurahan === kelurahanName);

                                if (population) {
                                    var popupContent = `<b>${kelurahanName}</b><br>`;
                                    Object.keys(population).forEach(function (key) {
                                        if (key !== "Kelurahan") {
                                            popupContent += `${key}: ${population[key]}<br>`;
                                        }
                                    });
                                    layer.bindPopup(popupContent);

                                    // Event listener untuk mengubah warna area saat diklik
                                    layer.on('click', function (e) {
                                        layer.setStyle({
                                            fillColor: '#ff7800',
                                            weight: 2,
                                            opacity: 1,
                                            color: 'white',
                                            dashArray: '3',
                                            fillOpacity: 0.7
                                        });
                                    });
                                    layer.on('dblclick', function (e) {
                                        layer.setStyle({
                                            fillColor: '#3388ff',
                                            weight: 2,
                                            opacity: 1,
                                            color: 'white',
                                            dashArray: '3',
                                            fillOpacity: 0.7
                                        });
                                    });
                                } else {
                                    layer.bindPopup(`<b>${kelurahanName}</b><br>Data tidak tersedia`);
                                }
                            },
                            style: function (feature) {
                                return {
                                    fillColor: '#3388ff',
                                    weight: 2,
                                    opacity: 1,
                                    color: 'white',
                                    dashArray: '3',
                                    fillOpacity: 0.7
                                };
                            }
                        }).addTo(map);
                    });
            });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Memuat data dari data.json
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                // Mendapatkan semua nama kandidat dari data
                var allCandidates = [];
                data.forEach(item => {
                    Object.keys(item).forEach(key => {
                        if (key !== "Kelurahan" && !allCandidates.includes(key)) {
                            allCandidates.push(key);
                        }
                    });
                });

                // Mempersiapkan data untuk setiap kandidat
                var datasets = allCandidates.map((candidate, index) => ({
                    label: candidate,
                    data: data.map(kelurahan => kelurahan[candidate] || 0),
                    backgroundColor: `rgba(${54 + index * 30}, ${162 + index * 10}, ${235 - index * 20}, 0.5)`,
                    borderColor: `rgba(${54 + index * 30}, ${162 + index * 10}, ${235 - index * 20}, 1)`,
                    borderWidth: 1
                }));

                const ctx = document.getElementById('myChart').getContext('2d');

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.map(kelurahan => kelurahan.Kelurahan), // Nama kelurahan sebagai labels
                        datasets: datasets // Dataset untuk setiap kandidat
                    },
                    options: {
                        plugins: {
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            },
                            title: {
                                display: true,
                                text: 'Jumlah Suara per Kelurahan'
                            }
                        },
                        responsive: true,
                        scales: {
                            x: {
                                stacked: true // Mengaktifkan stacked bar pada sumbu X
                            },
                            y: {
                                stacked: true, // Mengaktifkan stacked bar pada sumbu Y
                                beginAtZero: true
                            }
                        }
                    }
                });
            });
    </script>
</body>

</html>